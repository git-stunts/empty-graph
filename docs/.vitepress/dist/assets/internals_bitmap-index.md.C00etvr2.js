import{_ as a,c as t,o,ae as r}from"./chunks/framework.DvGhUH3j.js";const m=JSON.parse('{"title":"The Bitmap Index (Internals)","description":"","frontmatter":{},"headers":[],"relativePath":"internals/bitmap-index.md","filePath":"internals/bitmap-index.md"}'),n={name:"internals/bitmap-index.md"};function i(s,e,d,l,h,c){return o(),t("div",null,[...e[0]||(e[0]=[r('<h1 id="the-bitmap-index-internals" tabindex="-1">The Bitmap Index (Internals) <a class="header-anchor" href="#the-bitmap-index-internals" aria-label="Permalink to &quot;The Bitmap Index (Internals)&quot;">​</a></h1><blockquote><p><strong>Warning:</strong> This is deep magic. You don&#39;t need to know this to use the library, but it helps if you want to understand the performance characteristics.</p></blockquote><h2 id="the-problem" tabindex="-1">The Problem <a class="header-anchor" href="#the-problem" aria-label="Permalink to &quot;The Problem&quot;">​</a></h2><p>Git stores <code>Child -&gt; Parent</code> links efficiently. It stores <code>Parent -&gt; Child</code> links... not at all.</p><h2 id="the-solution" tabindex="-1">The Solution <a class="header-anchor" href="#the-solution" aria-label="Permalink to &quot;The Solution&quot;">​</a></h2><p>We map every 40-character SHA-1 to a 32-bit Integer ID. We then use <strong>Roaring Bitmaps</strong> to store the adjacency matrix.</p><h3 id="sharding" tabindex="-1">Sharding <a class="header-anchor" href="#sharding" aria-label="Permalink to &quot;Sharding&quot;">​</a></h3><p>To avoid loading a 100MB index for a single query, we shard the index by SHA prefix (2 chars -&gt; 256 shards).</p><ul><li><code>meta_ab.json</code>: ID mappings for SHAs starting with <code>ab</code>.</li><li><code>shards_fwd_ab.json</code>: Forward edges for <code>ab</code>.</li><li><code>shards_rev_ab.json</code>: Backward edges for <code>ab</code>.</li></ul><p>This allows us to perform &quot;Lazy Loading&quot;. We only load the shards relevant to the nodes you are currently visiting.</p>',10)])])}const u=a(n,[["render",i]]);export{m as __pageData,u as default};
